<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>å¦‚ä½•å»ºç«‹è‡ªå·±çš„web server</title>
  <style>
    body{font-family:system-ui,-apple-system,"Segoe UI",Roboto,Helvetica,Arial;margin:2rem auto;max-width:900px;padding:1rem;color:#222}
    pre{background:#f7f7f7;padding:1rem;border-radius:6px;overflow:auto}
    code{background:#f0f0f0;padding:.1rem .3rem;border-radius:4px}
    hr{border:none;border-top:1px solid #eee;margin:2rem 0}
  </style>
</head>
<body>
<ul>
<li><a href="https://stackoverflow.com/questions/20646822/how-to-serve-static-files-in-flask">å­˜å–æŸå€‹å­ç›®éŒ„è£¡é¢çš„html</a>
<a href=""></a></li>
<li><a href="https://sdwh.dev/posts/2023/03/HTTP-Protocol-Guide/">ç°¡å–®è¬›ä¸€ä¸‹htmlå”å®š</a></li>
</ul>
<h2 id="web-server">å¦‚ä½•å»ºç«‹è‡ªå·±çš„web server</h2>
<p>åˆ©ç”¨çš„èªè¨€æ˜¯python</p>
<p>ç‚ºç”šéº¼æ˜¯pythonè€Œä¸æ˜¯javascript å› ç‚ºjavascript å—é™æ–¼securityç„¡æ³•å­˜å–æœ¬åœ°ç«¯çš„ç¡¬ç¢Ÿæª”æ¡ˆã€‚</p>
<ul>
<li>
<p>ä½¿ç”¨AIå¯«çš„ç¨‹å¼ç¢¼,ä¸€æ¨£çš„æ•˜è¿°,å‡ºç¾ä¸ä¸€æ¨£çš„server.py è£¡é¢ç”¨çš„å¥—ä»¶(ç¨‹å¼ç¢¼ è‹±æ–‡module or library)ä¸ä¸€æ¨£
  æœ€å¾Œå¿…é ˆå†æŒ‡å®šä½¿ç”¨ç”šéº¼å¥—ä»¶ã€‚æ‰ç”¢ç”Ÿä¸€æ¨£çš„ç¨‹å¼ç¢¼ã€‚ </p>
</li>
<li>
<p>æˆ‘çµ¦AIçš„å‘½ä»¤æ˜¯ğŸ’–<code>åˆ©ç”¨python å’Œflask å¯«ä¸€å€‹server</code></p>
</li>
<li>python server.py</li>
</ul>
<p>å‡ºç¾éŒ¯èª¤è¨Šæ¯ ModuleNotFoundError: No module named 'flask'
  è§£æ±ºæ–¹æ³•: pip install flask</p>
<p>å®‰è£çš„æ™‚å€™,vscode å»ºè­°æˆ‘ä¸è¦å®‰è£å…¨å±€çš„å¥—ä»¶
æ‰€ä»¥æˆ‘ç¾åœ¨è¦ä¾†å»ºç«‹ä¸€å€‹è™›æ“¬ç’°å¢ƒ
çµ‚ç«¯æ©Ÿè£¡é¢æ•²å…¥</p>
<pre><code>python -m venv .venv # å…¶ä¸­.venv æ˜¯ä½¿ç”¨è€…æŒ‡å®šçš„æœ¬åœ°ç«¯å¥—ä»¶å®‰è£æ ¹ç›®éŒ„
</code></pre>
<p>å•AIæ€æ¨£å»ºç«‹è™›æ“¬ç’°å¢ƒ ğŸ’–<code>å¹«æˆ‘å»ºç«‹ä¸€å€‹pythonçš„è™›æ“¬ç’°å¢ƒ</code>æŒ‰ç…§AIå›ç­”çš„èªªæ˜
1. åŸ·è¡Œ Python: Create Environment æŒ‡ä»¤ï¼Œä¾ç…§ç•«é¢æŒ‡ç¤ºé¸æ“‡ venvã€‚
1. é¸æ“‡è¦ä½œç‚ºè™›æ“¬ç’°å¢ƒåŸºç¤çš„ Python ç›´è­¯å™¨ã€‚
1. å»ºç«‹å®Œæˆå¾Œï¼Œå»ºè­°å†åŸ·è¡Œ Python: Select Interpreter æŒ‡ä»¤ï¼Œ</p>
<p>ä½†æ˜¯ä»–æ²’æœ‰æç¤ºé—œæ‰ç›®å‰çš„çµ‚ç«¯æ©Ÿ,å†é‡æ–°é–‹ä¸€å€‹çµ‚ç«¯æ©Ÿ.
é€™æ™‚å€™æç¤ºç¬¦è™Ÿè®Šæˆ</p>
<pre><code>(.venv) @airbone4  #æ³¨æ„å‰é¢çš„æ‹¬è™Ÿ,è¡¨ç¤ºç›®å‰æˆ‘å€‘åœ¨è™›æ“¬ç’°å¢ƒ
</code></pre>
<p>è©¢å•AIèªªæ€éº¼å®‰è£flask ğŸ’–<code>å¹«æˆ‘å®‰è£flaskå¥—ä»¶</code> å‡ºç¾æŒ‡ä»¤</p>
<pre><code>pip install flask
</code></pre>
<p>è§£é‡‹<code>http://127.0.0.1:5000</code>
- http æŒ‡çš„æ˜¯ æˆ‘è¦åœ¨æœ¬åœ°ç«¯(127.0.0.1)çš„port 5000ä½¿ç”¨http å”å®š</p>
<p>åœ¨çµ‚ç«¯æ©Ÿä¸Šæ•²å…¥æŒ‡ä»¤</p>
<pre><code class="language-python">python server.py
</code></pre>
<p>ä½œæ¥­
1. åˆ©ç”¨pythonå¹«æˆ‘å¯«ä¸€å€‹ç¶²é å¯ä»¥è®“ä½¿ç”¨è€…é¸å–ä¸»æ©Ÿç«¯mp3 ä¸¦ä¸”æ’­æ”¾</p>
<pre><code>from flask import Flask, render_template_string, send_from_directory
import os

app = Flask(__name__)

# MP3 æª”æ¡ˆæ‰€åœ¨è³‡æ–™å¤¾
MP3_FOLDER = 'mp3_files'

@app.route('/')
def index():
    # å–å¾— mp3 æª”æ¡ˆæ¸…å–®
    files = [f for f in os.listdir(MP3_FOLDER) if f.endswith('.mp3')]
    # HTML æ¨¡æ¿
    html = '''
    &lt;!DOCTYPE html&gt;
    &lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;MP3 æ’­æ”¾å™¨&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h1&gt;é¸æ“‡ MP3 æ’­æ”¾&lt;/h1&gt;
        &lt;ul&gt;
        {% for file in files %}
            &lt;li&gt;
                {{ file }}
                &lt;audio controls&gt;
                    &lt;source src=&quot;/mp3/{{ file }}&quot; type=&quot;audio/mpeg&quot;&gt;
                    æ‚¨çš„ç€è¦½å™¨ä¸æ”¯æ´ audio æ¨™ç±¤ã€‚
                &lt;/audio&gt;
            &lt;/li&gt;
        {% endfor %}
        &lt;/ul&gt;
    &lt;/body&gt;
    &lt;/html&gt;
    '''
    return render_template_string(html, files=files)

@app.route('/mp3/&lt;filename&gt;')
def mp3(filename):
    # å‚³é€ mp3 æª”æ¡ˆ
    return send_from_directory(MP3_FOLDER, filename)

if __name__ == '__main__':
    # ç¢ºä¿ mp3 è³‡æ–™å¤¾å­˜åœ¨
    os.makedirs(MP3_FOLDER, exist_ok=True)
    app.run(host='0.0.0.0', port=5000, debug=True)
</code></pre>
</body>
</html>
